{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/19737/Desktop/poster/pages/index/index.vue?4663","webpack:///C:/Users/19737/Desktop/poster/pages/index/index.vue?977c","webpack:///C:/Users/19737/Desktop/poster/pages/index/index.vue?5949","uni-app:///pages/index/index.vue","webpack:///C:/Users/19737/Desktop/poster/pages/index/index.vue?04b1","webpack:///C:/Users/19737/Desktop/poster/pages/index/index.vue?d982"],"names":["createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiBnnB;AACA,0D;AACA;AACA,MADA,kBACA;AACA;AACA;AACA,2BAFA;AAGA,4BAHA;AAIA,kBAJA;AAKA,qBALA;AAMA,6DANA;AAOA;AACA,iBARA;AASA;AACA,cAVA;AAWA;AACA,oBAZA;;AAcA,GAhBA;AAiBA,SAjBA,qBAiBA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA;AACA,KARA;AASA,GA3BA;AA4BA;AACA;AACA,oBAFA,4BAEA,MAFA,EAEA;;;;;;AAMA,uFANA,SAMA,WANA;;AAQA,gDARA,SAQA,cARA;;AAUA,oBAVA;AAWA,KAbA;AAcA;AACA,eAfA,yBAeA;AACA;AACA;AACA;AACA,OAHA,EAGA,KAHA,CAGA;;AAEA,OALA;AAMA,KAtBA;AAuBA;AACA,eAxBA,yBAwBA;AACA,4BADA;AAEA;AACA,mBAHA,GAGA,mCAHA;AAIA;AACA;AACA;AANA,0CAOA;AACA;AACA,+BADA;AAEA,qCAFA;AAGA;AACA,wBADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,0BAJA,EAHA,EADA;;;AAWA;AACA,+BADA;AAEA,kCAFA;AAGA;AACA,2BADA;AAEA,0BAFA;AAGA,0BAHA;AAIA,0BAJA,EAHA,EAXA;;;AAqBA;AACA,8BADA;AAEA,0CAFA;AAGA;AACA,0BADA;AAEA,yBAFA;AAGA,oCAHA;AAIA,+CAJA;AAKA,uCALA,EAHA,EArBA,EAPA;;;;AAwCA,uEAxCA,SAwCA,SAxCA;AAyCA;AACA,uCA1CA;AA2CA,KAnEA,EA5BA,E;;;;;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAynC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;ACA7oC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showMask = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<text>点击图片生成海报</text>\r\n\t\t<!-- 要生成海报的图片 -->\r\n\t\t<image :src=\"imageUrl\" mode=\"aspectFill\" :style=\"{width:posterWidth,height:posterHeight}\" @click=\"createImage\"></image>\r\n\t\t<!-- 这里把canvas移到了屏幕外面，如果需要查看canvas的话把定位去掉 -->\r\n\t\t<canvas :style=\"{width:posterWidth,height:posterHeight,position:'fixed',left:'9999px',top:'0'}\"  canvas-id=\"myCanvas\" id=\"myCanvas\" class=\"canvas\"></canvas>\r\n\t\t<!-- 遮罩层 -->\r\n\t\t<view class=\"mask\" v-if=\"showMask\" @click=\"showMask=false\">\r\n\t\t\t<!-- 生成的海报图 -->\r\n\t\t\t<image :style=\"{width:posterWidth,height:posterHeight}\"  :src=\"lastPoster\" mode=\"aspectFill\" @click.stop=\"\"></image>\r\n\t\t\t<button type=\"primary\" @click=\"saveToAlbum\" >保存至相册</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { getWechatCode } from \"@u/appletCode.js\";\r\n\timport { loadImage,createPoster,canvasToTempFilePath,saveImageToPhotosAlbum } from \"@u/poster.js\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 海报图和canvas的宽高\r\n\t\t\t\tposterWidth:'550rpx',\r\n\t\t\t\tposterHeight:'980rpx',\r\n\t\t\t\tready: false,\r\n\t\t\t\tshowMask:false,\r\n\t\t\t\timageUrl:'http://yongblog.top/image-1607244573571.png',\r\n\t\t\t\t// 存本地缓存图片\r\n\t\t\t\tbgImage:'',\r\n\t\t\t\t// 存本地二维码图片\r\n\t\t\t\tcode:'',\r\n\t\t\t\t// 最后生成的海报缓存图片\r\n\t\t\t\tlastPoster:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis.loadingResources(this.imageUrl).then(state=>{\r\n\t\t\t\t// 状态为 true 表示加载完成\r\n\t\t\t\tif(state){\r\n\t\t\t\t\tthis.ready = true;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'图片加载完毕'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 加载图片资源\r\n\t\t\tasync loadingResources(imgurl){\r\n\t\t\t\t// 获取小程序二维码，这里需要调用后端的接口，客户端不能直接拿到小程序二维码，需要服务器发请求获取。XXXXXX\r\n\t\t\t\t// 服务器地址\r\n\t\t\t\t// const url = 'https://xxx.xxxx.com/xxxx/xxxx';\r\n\t\t\t\t// this.code = await getWechatCode(url,'123');\r\n\t\t\t\t// 这里小程序二维码用网络图片代替\r\n\t\t\t\tthis.code = await loadImage('http://yongblog.top/image-1607244833147.png')\r\n\t\t\t\t// console.log(123,this.code)\r\n\t\t\t\tthis.bgImage = await loadImage(imgurl);\r\n\t\t\t\t// console.log(this.bgImage)\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\t// 保存至相册\r\n\t\t\tsaveToAlbum(){\r\n\t\t\t\tsaveImageToPhotosAlbum(this.lastPoster).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tthis.showMask = false;\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 生成海报\r\n\t\t\tasync createImage(){\r\n\t\t\t\tif(!this.ready) return\r\n\t\t\t\t// 获取上下文对象\r\n\t\t\t\tconst ctx = uni.createCanvasContext('myCanvas');\r\n\t\t\t\t// 创建海报\r\n\t\t\t\t// 图片需设置x,y,width,height\r\n\t\t\t\t// 文字需要设置 text, x,y\r\n\t\t\t\tawait createPoster(ctx,[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype:'image',\r\n\t\t\t\t\t\turl:this.bgImage,\r\n\t\t\t\t\t\tconfig:{\r\n\t\t\t\t\t\t\tx:0,\r\n\t\t\t\t\t\t\ty:0,\r\n\t\t\t\t\t\t\tw:275,\r\n\t\t\t\t\t\t\th:490\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype:'image',\r\n\t\t\t\t\t\turl:this.code,\r\n\t\t\t\t\t\tconfig:{\r\n\t\t\t\t\t\t\tx:84.5,\r\n\t\t\t\t\t\t\ty:320,\r\n\t\t\t\t\t\t\tw:100,\r\n\t\t\t\t\t\t\th:100\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype:'text',\r\n\t\t\t\t\t\ttext:'这个小程序生成海报插件做的太好啦',\r\n\t\t\t\t\t\tconfig:{\r\n\t\t\t\t\t\t\tx:140,\r\n\t\t\t\t\t\t\ty:60,\r\n\t\t\t\t\t\t\tcolor:'#E60012',\r\n\t\t\t\t\t\t\tfont:'normal bold 16px 仿宋',\r\n\t\t\t\t\t\t\ttextAlign:'center'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t])\r\n\t\t\t\tconst imagePath = await canvasToTempFilePath('myCanvas',this);\r\n\t\t\t\tthis.lastPoster = imagePath;\r\n\t\t\t\tthis.showMask = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\twidth: 100vw;\r\n\t\tmin-height: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.canvas{\r\n\t\t\r\n\t\tborder: 1px solid;\r\n\t}\r\n\t.image{\r\n\t\twidth: 550rpx;\r\n\t\theight: 980rpx;\r\n\t}\r\n\t.mask{\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tposition: fixed;\r\n\t\tbackground-color: rgba($color: #000000, $alpha: .4);\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607247870621\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}